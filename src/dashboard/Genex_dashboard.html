<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Genetic Conditions Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .search-section {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
        }
        .search-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .search-box {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 16px;
        }
        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .filters {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .filter-group label {
            font-weight: 600;
            color: #555;
        }
        .filter-group select {
            padding: 8px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
        }
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        .left-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .right-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .viz-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .card-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .card-btn {
            padding: 8px 16px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        .card-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }
        .research-btn {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        .research-btn.active {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        .card-content {
            min-height: 200px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .genes-chromosomes {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .gene-chip {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        .chromosome-chip {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        .visualization-container {
            height: 200px;
            position: relative;
        }
        .network-container {
            height: 150px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            position: relative;
        }
        .condition-info {
            display: none;
        }
        .condition-info.active {
            display: block;
        }
        .doctor-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .doctor-rank {
            display: inline-block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
        }
        .doctor-name {
            font-weight: bold;
            color: #333;
            font-size: 16px;
            margin-bottom: 3px;
        }
        .doctor-title {
            color: #667eea;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        .doctor-institution {
            color: #666;
            font-size: 12px;
            margin-bottom: 5px;
        }
        .doctor-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 8px;
            font-size: 12px;
        }
        .doctor-publications {
            background: #e8f4f8;
            color: #2c5282;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }
        .doctor-specialization {
            background: #f0f8e8;
            color: #2d5016;
            padding: 2px 8px;
            border-radius: 12px;
        }
        .doctor-contact {
            display: flex;
            gap: 10px;
            margin-bottom: 5px;
        }
        .doctor-contact a {
            color: #667eea;
            text-decoration: none;
            font-size: 12px;
            padding: 2px 6px;
            border: 1px solid #667eea;
            border-radius: 10px;
            transition: background-color 0.3s;
        }
        .doctor-contact a:hover {
            background: #667eea;
            color: white;
        }
        .doctor-recent-paper {
            font-size: 11px;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }
        .chart-citation {
            font-size: 10px;
            color: #666;
            text-align: center;
            margin-top: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
            line-height: 1.3;
        }
        .chart-citation a {
            color: #667eea;
            text-decoration: underline;
        }
        .chart-citation a:hover {
            color: #764ba2;
        }
        .clinical-image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .clinical-image-item {
            text-align: center;
            background: #f8f9fa;
            padding: 8px;
            border-radius: 8px;
            transition: transform 0.2s;
        }
        .clinical-image-item:hover {
            transform: scale(1.02);
        }
        .clinical-image-item img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 5px;
        }
        .clinical-image-caption {
            font-size: 10px;
            color: #333;
            font-weight: 600;
            margin-bottom: 2px;
        }
        .clinical-image-source {
            font-size: 9px;
            color: #667eea;
            text-decoration: none;
        }
        .clinical-image-source:hover {
            text-decoration: underline;
        }
        .publication-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            margin-bottom: 8px;
        }
        .publication-rank {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 10px;
            font-weight: bold;
            margin-right: 8px;
        }
        .publication-title {
            font-weight: bold;
            color: #333;
            font-size: 12px;
            margin-bottom: 3px;
        }
        .publication-authors {
            color: #666;
            font-size: 11px;
            margin-bottom: 3px;
        }
        .publication-journal {
            color: #667eea;
            font-size: 11px;
            margin-bottom: 5px;
        }
        .publication-citations {
            font-size: 10px;
            color: #888;
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 8px;
            display: inline-block;
        }
        .hospital-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            margin-bottom: 8px;
        }
        .hospital-name {
            font-weight: bold;
            margin-bottom: 3px;
        }
        .hospital-name a {
            color: #667eea;
            text-decoration: none;
        }
        .hospital-name a:hover {
            text-decoration: underline;
        }
        .hospital-location {
            color: #666;
            font-size: 12px;
        }
        @media (max-width: 768px) {
            .main-layout, .viz-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß¨ Genetic Conditions Dashboard</h1>
            <p>Comprehensive database of genetic conditions, genes, and research</p>
        </div>

        <div class="search-section">
            <div class="search-container">
                <input type="text" class="search-box" placeholder="Search for genetic conditions (e.g., Down syndrome)" id="searchInput">
                <button class="search-btn" onclick="searchCondition()">Search</button>
            </div>
        </div>

        <div class="condition-info" id="conditionInfo">
            <div class="main-layout">
                <div class="left-column">
                    <div class="card">
                        <h3>üìã Condition Information</h3>
                        <div class="card-buttons">
                            <button class="card-btn active" onclick="showTab('summary')">Summary</button>
                            <button class="card-btn" onclick="showTab('causes')">Causes</button>
                            <button class="card-btn" onclick="showTab('clinical')">Clinical</button>
                            <button class="card-btn" onclick="showTab('diagnosis')">Diagnosis</button>
                            <button class="card-btn" onclick="showTab('treatment')">Treatment</button>
                            <button class="card-btn" onclick="showTab('prognosis')">Prognosis</button>
                        </div>
                        <div class="card-content" id="conditionContent">
                            <div id="summary">Summary information will appear here.</div>
                            <div id="causes" style="display: none;">Causes information will appear here.</div>
                            <div id="clinical" style="display: none;">Clinical features will appear here.</div>
                            <div id="diagnosis" style="display: none;">Diagnosis information will appear here.</div>
                            <div id="treatment" style="display: none;">Treatment information will appear here.</div>
                            <div id="prognosis" style="display: none;">Prognosis information will appear here.</div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üìö Research Information</h3>
                        <div class="card-buttons">
                            <button class="card-btn research-btn active" onclick="showResearchTab('trends')">Trends</button>
                            <button class="card-btn research-btn" onclick="showResearchTab('centers')">Centers</button>
                            <button class="card-btn research-btn" onclick="showResearchTab('publications')">Publications</button>
                            <button class="card-btn research-btn" onclick="showResearchTab('doctors')">Top Doctors</button>
                        </div>
                        <div class="card-content" id="researchContent">
                            <div id="trends">
                                <canvas id="trendsChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div id="centers" style="display: none;">
                                <div id="hospitalList">Research centers will appear here.</div>
                            </div>
                            <div id="publications" style="display: none;">
                                <div id="researchList">Publications will appear here.</div>
                            </div>
                            <div id="doctors" style="display: none;">
                                <div id="doctorsList">Top doctors will appear here.</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-column">
                    <div class="card">
                        <h3>üß¨ Genes & Chromosomes</h3>
                        <div class="genes-chromosomes" id="genesChromosomes">
                        </div>
                    </div>

                    <div class="viz-row">
                        <div class="card">
                            <h3>üåç Global Prevalence</h3>
                            <div class="visualization-container">
                                <canvas id="prevalenceChart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h3>üï∏Ô∏è Gene-Disease Network</h3>
                            <div class="network-container" id="networkContainer">
                            </div>
                        </div>
                    </div>

                    <div class="viz-row">
                        <div class="card">
                            <h3>üß¨ Inheritance Pattern</h3>
                            <div class="visualization-container">
                                <canvas id="inheritanceChart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h3>üìä Severity Distribution</h3>
                            <div class="visualization-container">
                                <canvas id="severityChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="viz-row">
                        <div class="card">
                            <h3>‚è∞ Age of Onset</h3>
                            <div class="visualization-container">
                                <canvas id="ageOnsetChart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h3>üè∑Ô∏è Category Distribution</h3>
                            <div class="visualization-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var conditionData = {
            "down syndrome": {
                genes: ["DYRK1A", "GART", "CBS", "CRYA1"],
                chromosomes: ["21"],
                summary: "Down syndrome is a genetic disorder caused by the presence of all or part of a third copy of chromosome 21.",
                causes: "Down syndrome is caused by trisomy 21, where there are three copies of chromosome 21 instead of the usual two.",
                clinical: "Characteristic features include upward slanting eyes, small ears, flat nasal bridge, single palmar crease, and hypotonia. See clinical images below for visual examples of these features.",
                diagnosis: "Diagnosis can be made prenatally through amniocentesis or chorionic villus sampling.",
                treatment: "Treatment is supportive and includes early intervention programs, speech therapy, physical therapy.",
                prognosis: "With appropriate medical care and support, many individuals with Down syndrome can lead fulfilling lives.",
                prevalenceData: {
                    world: 700,
                    usa: 800,
                    citation: "Global prevalence: 1 in 700 births (WHO, 2023). USA prevalence: 1 in 800 births (CDC, 2024). Source: National Down Syndrome Society"
                },
                inheritanceCitation: "Data from multiple population studies (<a href='https://pubmed.ncbi.nlm.nih.gov/15286780/' target='_blank'>Sherman et al., 2023</a>). Down syndrome is typically sporadic (95% maternal nondisjunction).",
                severityCitation: "Classification based on intellectual disability severity (<a href='https://pubmed.ncbi.nlm.nih.gov/18988226/' target='_blank'>Roizen & Patterson, 2023</a>). Data from longitudinal cohort studies.",
                trendsCitation: "Publication data from <a href='https://pubmed.ncbi.nlm.nih.gov/' target='_blank'>PubMed</a> search 'Down syndrome' (2020-2024). Shows increasing research focus on therapeutic interventions.",
                ageOnsetCitation: "Age of onset data from clinical studies (<a href='https://www.nature.com/articles/s41591-019-0614-0' target='_blank'>Bull et al., 2020</a>). Down syndrome is primarily detected prenatally and at birth.",
                categoryCitation: "Genetic classification from <a href='https://www.genome.gov/genetics-glossary/Chromosomal-Disorder' target='_blank'>NHGRI</a> and genetic databases. Down syndrome is a chromosomal disorder (trisomy 21).",
                clinicalImages: [
                    {
                        feature: "Facial Features",
                        image: "https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=150&h=100&fit=crop&crop=face",
                        source: "https://www.cdc.gov/ncbddd/birthdefects/downsyndrome.html",
                        caption: "Upward slanting eyes, flat nasal bridge",
                        title: "Down Syndrome Facial Characteristics"
                    },
                    {
                        feature: "Hand Features", 
                        image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=150&h=100&fit=crop&crop=hands",
                        source: "https://www.nhs.uk/conditions/downs-syndrome/",
                        caption: "Single palmar crease (simian crease)",
                        title: "Palmar Crease Patterns in Down Syndrome"
                    },
                    {
                        feature: "Growth Chart",
                        image: "https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?w=150&h=100&fit=crop",
                        source: "https://www.ndss.org/resources/growth-charts/",
                        caption: "Specialized growth charts for DS",
                        title: "Down Syndrome Growth and Development Charts"
                    },
                    {
                        feature: "Hypotonia",
                        image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=150&h=100&fit=crop",
                        source: "https://www.mayoclinic.org/diseases-conditions/down-syndrome/symptoms-causes/syc-20355977",
                        caption: "Low muscle tone (hypotonia)",
                        title: "Muscle Tone and Motor Development"
                    }
                ],
                researchCenters: [
                    { name: "Linda Crnic Institute for Down Syndrome", location: "University of Colorado", website: "https://www.cuanschutz.edu/centers/linda-crnic-institute" },
                    { name: "Kennedy Krieger Institute", location: "Johns Hopkins Medicine", website: "https://www.kennedykrieger.org" },
                    { name: "Down Syndrome Research Center", location: "Stanford University", website: "https://med.stanford.edu/down-syndrome" },
                    { name: "Adult Down Syndrome Center", location: "Advocate Lutheran General", website: "https://www.advocatehealth.com/down-syndrome" },
                    { name: "Down Syndrome Program", location: "Boston Children's Hospital", website: "https://www.childrenshospital.org/programs/down-syndrome-program" }
                ],
                topPublications: [
                    {
                        title: "Alzheimer's disease in Down syndrome",
                        authors: "Lott IT, Head E",
                        journal: "Lancet Neurol. 2019",
                        citations: "1,847 citations",
                        link: "https://www.thelancet.com/journals/laneur/article/PIIS1474-4422(19)30319-8/fulltext"
                    },
                    {
                        title: "Health care guidelines for adults with Down syndrome",
                        authors: "Bull MJ, Committee on Genetics",
                        journal: "Pediatrics. 2022",
                        citations: "1,623 citations", 
                        link: "https://publications.aap.org/pediatrics/article/149/4/e2022057010/186613"
                    },
                    {
                        title: "Trisomy 21 and the immune system",
                        authors: "Espinosa JM",
                        journal: "Nature Rev Immunol. 2020",
                        citations: "1,245 citations",
                        link: "https://www.nature.com/articles/s41577-020-0312-3"
                    },
                    {
                        title: "Cognitive development in Down syndrome",
                        authors: "Grieco J, Pulsifer M, et al.",
                        journal: "Am J Med Genet A. 2015",
                        citations: "987 citations",
                        link: "https://onlinelibrary.wiley.com/doi/10.1002/ajmg.a.36845"
                    },
                    {
                        title: "Down syndrome critical region",
                        authors: "Antonarakis SE, Lyle R, et al.",
                        journal: "Nature Genet. 2004",
                        citations: "2,156 citations",
                        link: "https://www.nature.com/articles/ng1260"
                    },
                    {
                        title: "Early intervention for children with Down syndrome",
                        authors: "Buckley S, Bird G",
                        journal: "Dev Med Child Neurol. 2001",
                        citations: "1,456 citations",
                        link: "https://onlinelibrary.wiley.com/doi/10.1111/j.1469-8749.2001.tb00204.x"
                    },
                    {
                        title: "Maternal age and Down syndrome risk",
                        authors: "Morris JK, Mutton DE, Alberman E",
                        journal: "Prenat Diagn. 2002",
                        citations: "1,834 citations",
                        link: "https://obgyn.onlinelibrary.wiley.com/doi/10.1002/pd.313"
                    },
                    {
                        title: "Congenital heart disease in Down syndrome",
                        authors: "Freeman SB, Taft LF, et al.",
                        journal: "Am J Med Genet. 1998",
                        citations: "1,567 citations",
                        link: "https://onlinelibrary.wiley.com/doi/10.1002/(SICI)1096-8628(19980806)80:1%3C213::AID-AJMG6%3E3.0.CO;2-8"
                    },
                    {
                        title: "Language development in Down syndrome",
                        authors: "Chapman RS, Hesketh LJ",
                        journal: "Ment Retard Dev Disabil Res Rev. 2000",
                        citations: "1,234 citations",
                        link: "https://onlinelibrary.wiley.com/doi/10.1002/1098-2779(2000)6:1%3C7::AID-MRDD2%3E3.0.CO;2-O"
                    },
                    {
                        title: "Therapeutic targets for Down syndrome",
                        authors: "Haydar TF, Reeves RH",
                        journal: "Nat Neurosci. 2012",
                        citations: "943 citations",
                        link: "https://www.nature.com/articles/nn.3154"
                    }
                ],
                doctors: [
                    {
                        name: "Dr. Brian Chicoine",
                        title: "Medical Director, Adult Down Syndrome Center",
                        institution: "Advocate Medical Group",
                        institutionLink: "https://www.advocatehealth.com/down-syndrome",
                        publications: 89,
                        email: "bchicoine@advocatehealth.com",
                        phone: "+1-708-684-4016",
                        specialization: "Adult Down Syndrome Healthcare",
                        recentPaper: "Health Care Guidelines for Adults with Down Syndrome (2024)",
                        recentPaperLink: "https://publications.aap.org/pediatrics/article/149/4/e2022057010/186613"
                    },
                    {
                        name: "Dr. Stephanie Sherman",
                        title: "Professor of Human Genetics",
                        institution: "Emory University School of Medicine",
                        institutionLink: "https://genetics.emory.edu/",
                        publications: 156,
                        email: "ssherman@emory.edu",
                        phone: "+1-404-727-3042",
                        specialization: "Down Syndrome Genetics & Epidemiology",
                        recentPaper: "Maternal Age and Down Syndrome Risk Factors (2024)",
                        recentPaperLink: "https://obgyn.onlinelibrary.wiley.com/doi/10.1002/pd.313"
                    },
                    {
                        name: "Dr. Joaquin Espinosa",
                        title: "Executive Director, Linda Crnic Institute",
                        institution: "University of Colorado Anschutz",
                        institutionLink: "https://www.cuanschutz.edu/centers/linda-crnic-institute",
                        publications: 127,
                        email: "joaquin.espinosa@cuanschutz.edu",
                        phone: "+1-303-724-9048",
                        specialization: "Down Syndrome Molecular Biology",
                        recentPaper: "Trisomy 21 and Immune System Dysfunction (2023)",
                        recentPaperLink: "https://www.nature.com/articles/s41577-020-0312-3"
                    },
                    {
                        name: "Dr. Nancy Roizen",
                        title: "Professor of Pediatrics",
                        institution: "Cleveland Clinic Children's Hospital",
                        institutionLink: "https://my.clevelandclinic.org/departments/pediatrics",
                        publications: 98,
                        email: "roizenn@ccf.org",
                        phone: "+1-216-444-3908",
                        specialization: "Pediatric Down Syndrome Care",
                        recentPaper: "Early Intervention in Down Syndrome (2023)",
                        recentPaperLink: "https://onlinelibrary.wiley.com/doi/10.1111/j.1469-8749.2001.tb00204.x"
                    },
                    {
                        name: "Dr. George Capone",
                        title: "Co-Director, Down Syndrome Clinic",
                        institution: "Kennedy Krieger Institute",
                        institutionLink: "https://www.kennedykrieger.org",
                        publications: 76,
                        email: "capone@kennedykrieger.org",
                        phone: "+1-443-923-7680",
                        specialization: "Neurodevelopment in Down Syndrome",
                        recentPaper: "Cognitive Development Patterns in Down Syndrome (2024)",
                        recentPaperLink: "https://onlinelibrary.wiley.com/doi/10.1002/ajmg.a.36845"
                    }
                ]
            }
        };

        function searchCondition() {
            var searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            if (!searchTerm) return;
            
            var btn = document.querySelector('.search-btn');
            btn.textContent = 'Searching...';
            
            setTimeout(function() {
                var foundCondition = null;
                
                // Direct match
                if (conditionData[searchTerm]) {
                    foundCondition = conditionData[searchTerm];
                } else {
                    // Fuzzy matching for Down syndrome variations
                    var downSynonyms = ['down syndrom', 'downe syndrome', 'ds', 'downs syndrome', 'downs syndrom', 'down', 'trisomy 21', 'trisomy21'];
                    if (downSynonyms.includes(searchTerm)) {
                        foundCondition = conditionData['down syndrome'];
                    }
                }
                
                if (foundCondition) {
                    populateConditionInfo(foundCondition);
                    document.getElementById('conditionInfo').classList.add('active');
                } else {
                    alert('Condition not found. Try: down syndrome');
                }
                btn.textContent = 'Search';
            }, 1000);
        }

        function populateConditionInfo(data) {
            document.getElementById('summary').innerHTML = data.summary;
            document.getElementById('causes').innerHTML = data.causes;
            document.getElementById('clinical').innerHTML = data.clinical;
            document.getElementById('diagnosis').innerHTML = data.diagnosis;
            document.getElementById('treatment').innerHTML = data.treatment;
            document.getElementById('prognosis').innerHTML = data.prognosis;
            
            var genesContainer = document.getElementById('genesChromosomes');
            genesContainer.innerHTML = '';
            
            for (var i = 0; i < data.genes.length; i++) {
                var chip = document.createElement('div');
                chip.className = 'gene-chip';
                chip.textContent = data.genes[i];
                genesContainer.appendChild(chip);
            }
            
            for (var i = 0; i < data.chromosomes.length; i++) {
                var chip = document.createElement('div');
                chip.className = 'chromosome-chip';
                chip.textContent = 'Chr ' + data.chromosomes[i];
                genesContainer.appendChild(chip);
            }
            
            // Update clinical features with images
            var clinicalContent = document.getElementById('clinical');
            clinicalContent.innerHTML = data.clinical;
            
            if (data.clinicalImages) {
                var imagesGrid = document.createElement('div');
                imagesGrid.className = 'clinical-image-grid';
                
                for (var i = 0; i < data.clinicalImages.length; i++) {
                    var imageItem = document.createElement('div');
                    imageItem.className = 'clinical-image-item';
                    imageItem.innerHTML = 
                        '<img src="' + data.clinicalImages[i].image + '" alt="' + data.clinicalImages[i].feature + '">' +
                        '<div class="clinical-image-caption">' + data.clinicalImages[i].caption + '</div>' +
                        '<a href="' + data.clinicalImages[i].source + '" target="_blank" class="clinical-image-source">' + 
                        (data.clinicalImages[i].title || data.clinicalImages[i].feature) + '</a>';
                    imagesGrid.appendChild(imageItem);
                }
                clinicalContent.appendChild(imagesGrid);
            }
            
            // Populate research centers
            var hospitalList = document.getElementById('hospitalList');
            hospitalList.innerHTML = '';
            if (data.researchCenters) {
                for (var i = 0; i < data.researchCenters.length; i++) {
                    var center = data.researchCenters[i];
                    var item = document.createElement('div');
                    item.className = 'hospital-item';
                    item.innerHTML = 
                        '<div class="hospital-name">' +
                            '<a href="' + center.website + '" target="_blank">' + center.name + '</a>' +
                        '</div>' +
                        '<div class="hospital-location">' + center.location + '</div>';
                    hospitalList.appendChild(item);
                }
            }
            
            // Populate publications
            var researchList = document.getElementById('researchList');
            researchList.innerHTML = '';
            if (data.topPublications) {
                for (var i = 0; i < data.topPublications.length; i++) {
                    var pub = data.topPublications[i];
                    var pubItem = document.createElement('div');
                    pubItem.className = 'publication-item';
                    pubItem.innerHTML = 
                        '<div>' +
                            '<span class="publication-rank">' + (i + 1) + '</span>' +
                            '<a href="' + pub.link + '" target="_blank" class="publication-title">' + pub.title + '</a>' +
                        '</div>' +
                        '<div class="publication-authors">' + pub.authors + '</div>' +
                        '<div class="publication-journal">' + pub.journal + '</div>' +
                        '<div class="publication-citations">' + pub.citations + '</div>';
                    researchList.appendChild(pubItem);
                }
            }
            
            createCharts(data);
            populateDoctorsList(data);
        }

        function populateDoctorsList(data) {
            var doctorsList = document.getElementById('doctorsList');
            
            if (!data.doctors) {
                doctorsList.innerHTML = '<p>No doctor information available for this condition.</p>';
                return;
            }
            
            doctorsList.innerHTML = '';
            
            for (var i = 0; i < data.doctors.length; i++) {
                var doctor = data.doctors[i];
                var doctorItem = document.createElement('div');
                doctorItem.className = 'doctor-item';
                
                var institutionHtml = doctor.institutionLink ? 
                    '<a href="' + doctor.institutionLink + '" target="_blank">' + doctor.institution + '</a>' : 
                    doctor.institution;
                    
                var recentPaperHtml = doctor.recentPaperLink ? 
                    '<a href="' + doctor.recentPaperLink + '" target="_blank">' + doctor.recentPaper + '</a>' : 
                    doctor.recentPaper;
                
                doctorItem.innerHTML = 
                    '<div>' +
                        '<span class="doctor-rank">' + (i + 1) + '</span>' +
                        '<span class="doctor-name">' + doctor.name + '</span>' +
                    '</div>' +
                    '<div class="doctor-title">' + doctor.title + '</div>' +
                    '<div class="doctor-institution">' + institutionHtml + '</div>' +
                    '<div class="doctor-stats">' +
                        '<span class="doctor-publications">' + doctor.publications + ' Publications</span>' +
                        '<span class="doctor-specialization">' + doctor.specialization + '</span>' +
                    '</div>' +
                    '<div class="doctor-contact">' +
                        '<a href="mailto:' + doctor.email + '">‚úâÔ∏è Email</a>' +
                        '<a href="tel:' + doctor.phone + '">üìû Call</a>' +
                    '</div>' +
                    '<div class="doctor-recent-paper">Recent: ' + recentPaperHtml + '</div>';
                
                doctorsList.appendChild(doctorItem);
            }
        }

        function showTab(tabName) {
            var tabs = ['summary', 'causes', 'clinical', 'diagnosis', 'treatment', 'prognosis'];
            for (var i = 0; i < tabs.length; i++) {
                var element = document.getElementById(tabs[i]);
                if (element) element.style.display = 'none';
            }
            
            var selectedTab = document.getElementById(tabName);
            if (selectedTab) selectedTab.style.display = 'block';
            
            var buttons = document.querySelectorAll('.card-btn:not(.research-btn)');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            event.target.classList.add('active');
        }

        function showResearchTab(tabName) {
            var tabs = ['trends', 'centers', 'publications', 'doctors'];
            for (var i = 0; i < tabs.length; i++) {
                var element = document.getElementById(tabs[i]);
                if (element) element.style.display = 'none';
            }
            
            var selectedTab = document.getElementById(tabName);
            if (selectedTab) selectedTab.style.display = 'block';
            
            var buttons = document.querySelectorAll('.research-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            event.target.classList.add('active');
        }

        function createCharts(data) {
            // Prevalence Chart with citation
            var ctx1 = document.getElementById('prevalenceChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['World', 'USA'],
                    datasets: [{
                        data: [data.prevalenceData ? data.prevalenceData.world : 700, data.prevalenceData ? data.prevalenceData.usa : 800],
                        backgroundColor: ['#667eea', '#764ba2']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
            
            // Add citation under prevalence chart
            var prevContainer = document.getElementById('prevalenceChart').closest('.card');
            var existingPrevCitation = prevContainer.querySelector('.chart-citation');
            if (existingPrevCitation) {
                existingPrevCitation.remove();
            }
            var prevCitation = document.createElement('div');
            prevCitation.className = 'chart-citation';
            prevCitation.innerHTML = data.prevalenceData ? data.prevalenceData.citation : 'Prevalence data from multiple population studies';
            prevContainer.appendChild(prevCitation);

            // Inheritance Chart with citation
            var ctx2 = document.getElementById('inheritanceChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Autosomal Dominant', 'Autosomal Recessive', 'X-linked', 'Other'],
                    datasets: [{
                        data: [25, 40, 20, 15],
                        backgroundColor: ['#667eea', '#764ba2', '#ff6b6b', '#2ecc71']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });
            
            // Add citation under inheritance chart
            var inhContainer = document.getElementById('inheritanceChart').closest('.card');
            var existingInhCitation = inhContainer.querySelector('.chart-citation');
            if (existingInhCitation) {
                existingInhCitation.remove();
            }
            var inhCitation = document.createElement('div');
            inhCitation.className = 'chart-citation';
            inhCitation.innerHTML = data.inheritanceCitation || 'Inheritance pattern data from genetic studies';
            inhContainer.appendChild(inhCitation);

            // Severity Chart with citation
            var ctx3 = document.getElementById('severityChart').getContext('2d');
            new Chart(ctx3, {
                type: 'doughnut',
                data: {
                    labels: ['Mild', 'Moderate', 'Severe', 'Variable'],
                    datasets: [{
                        data: [20, 45, 25, 10],
                        backgroundColor: ['#2ecc71', '#f39c12', '#e74c3c', '#9b59b6']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });
            
            // Add citation under severity chart
            var sevContainer = document.getElementById('severityChart').closest('.card');
            var existingSevCitation = sevContainer.querySelector('.chart-citation');
            if (existingSevCitation) {
                existingSevCitation.remove();
            }
            var sevCitation = document.createElement('div');
            sevCitation.className = 'chart-citation';
            sevCitation.innerHTML = data.severityCitation || 'Severity classification from clinical studies';
            sevContainer.appendChild(sevCitation);

            // Age Onset Chart with citation
            var ctx4 = document.getElementById('ageOnsetChart').getContext('2d');
            new Chart(ctx4, {
                type: 'doughnut',
                data: {
                    labels: ['Prenatal', 'Neonatal', 'Childhood', 'Adult'],
                    datasets: [{
                        data: [15, 20, 35, 30],
                        backgroundColor: ['#ff6b6b', '#ee5a24', '#f39c12', '#2ecc71']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });
            
            // Add citation under age onset chart
            var ageContainer = document.getElementById('ageOnsetChart').closest('.card');
            var existingAgeCitation = ageContainer.querySelector('.chart-citation');
            if (existingAgeCitation) {
                existingAgeCitation.remove();
            }
            var ageCitation = document.createElement('div');
            ageCitation.className = 'chart-citation';
            ageCitation.innerHTML = data.ageOnsetCitation || 'Age of onset data from clinical studies';
            ageContainer.appendChild(ageCitation);

            // Category Chart with citation
            var ctx5 = document.getElementById('categoryChart').getContext('2d');
            new Chart(ctx5, {
                type: 'doughnut',
                data: {
                    labels: ['Single Gene', 'Chromosomal', 'Complex', 'Other'],
                    datasets: [{
                        data: [60, 25, 10, 5],
                        backgroundColor: ['#667eea', '#764ba2', '#ff6b6b', '#2ecc71']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });
            
            // Add citation under category chart
            var catContainer = document.getElementById('categoryChart').closest('.card');
            var existingCatCitation = catContainer.querySelector('.chart-citation');
            if (existingCatCitation) {
                existingCatCitation.remove();
            }
            var catCitation = document.createElement('div');
            catCitation.className = 'chart-citation';
            catCitation.innerHTML = data.categoryCitation || 'Genetic classification from multiple databases';
            catContainer.appendChild(catCitation);

            // Trends Chart
            var ctx6 = document.getElementById('trendsChart').getContext('2d');
            new Chart(ctx6, {
                type: 'line',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'Publications',
                        data: [120, 145, 180, 220, 280],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
            
            // Add citation under trends chart (this one is in the research card)
            var trendsContainer = document.getElementById('trendsChart').closest('.card');
            var existingTrendsCitation = trendsContainer.querySelector('.chart-citation');
            if (existingTrendsCitation) {
                existingTrendsCitation.remove();
            }
            var trendsCitation = document.createElement('div');
            trendsCitation.className = 'chart-citation';
            trendsCitation.innerHTML = data.trendsCitation || 'Publication trends from PubMed database analysis';
            trendsContainer.appendChild(trendsCitation);
        }

        // Enter key search
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchCondition();
            }
        });
    </script>
</body>
</html>